{% extends 'base_urban.html' %}
{% load static%}
{% block content %}

<style>

.leaflet-popup-content{
    background: rgb(255 255 255 / 90%);
    color: #000000;
    width: auto;
    font-size: 16px;
}


label{
    font-size: 15px; 
    

}
.multiselect {
  width: 200px;
}

.selectBox {
  position: relative;
}

.selectBox select {
  width: 100%;
  font-weight: bold;
}

.overSelect {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

#checkboxes {
  display: none;
  border: 1px #dadada solid;
}

#checkboxes label {
  display: block;
}

#checkboxes label:hover {
  background-color: #1e90ff;
}


#checkboxes1 {
  display: none;
  border: 1px #dadada solid;
}

#checkboxes1 label {
  display: block;
}

#checkboxes1 label:hover {
  background-color: #1e90ff;
}
#ward122 {
  display: none;
  border: 1px #dadada solid;
}

#ward122 label {
  display: block;
}
#wardSdiv {
  display: none;
  border: 1px #dadada solid;
  
}

#wardSdiv label {
  display: block;
}

#wardGSdiv {
  display: none;
  border: 1px #dadada solid;
}

#wardGSdiv label {
  display: block;
}

#wardLdiv {
  display: none;
  border: 1px #dadada solid;
}

#wardkwestdiv label {
  display: block;
}
#wardkwestdiv {
  display: none;
  border: 1px #dadada solid;
}

#wardLdiv label {
  display: block;
}
.border {
        padding: 6px 8px;
        border-style: groove;
        border-radius: 5px;
        margin: 20px;
        
    }
    
    
    table,
    th,
    td {
        border-bottom: 1px solid #ddd;
        border-collapse: collapse;
        padding: 2px 3px;
        text-align: center;
    }
    
    th {
        font-weight: bold;
    }
    
    tr:hover {
        background-color: #c9dbe6;
    }

    
    .table {
        border-collapse: collapse;
        padding: 50px;
        font-weight: bold;
        /* background:rgba(191, 149, 233, 0.473); */
    }
    /* css to customize Leaflet default styles  */
    
    .leaflet-popup-content-wrapper {
        background: rgba(0, 0, 0, 0.9);
        color: #ffffff;
    }
    
    .leaflet-popup-content {
        font-weight: bold;
    }
    
    h6 {
        color: blue;
    }
    
</style>

<div id="side-bar" style="background-color: rgba(255, 255, 255); height: 80%;">                <!-- Main container -->

  <div class="border">
    <table>
        <tr>
            <h6>Mumbai Ward Boundaries</h6>
        </tr>
        <div class="text-center">
            <div class="checkbox" id="boundary">
                <tr>
                    <tb> <label><input type="checkbox" value="{corporator}" onchange="getWard(this)"></tb><tb><span> Corporator Wards </span></label></tb>
                </tr>
            </div>
            <div class="checkbox" id="boundary">
              <tr>
                <tb><label><input type="checkbox" value="{admin}" onchange="getWard(this)"></label></tb><tb><span> Admin Wards </span></label></tb>
              </tr>  
            </div>
         </div>
      </table>
<hr style="height:2px;border-width:0;color:gray;background-color:gray">
<div class="tooltips" title="Please select District">
  <h6>Mumbai</h6>
    <select class='form-control' id="indstate" name="indstate">
        <option value="All">Select District</option>
        <!-- <optgroup label="District">  -->
          <option value="Mumbai City">Mumbai: Mumbai City</option>

            <option value="Mumbai Suburban">Mumbai: Mumbai Suburban</option>
            

      </select> 
  </div>  
      &nbsp;&nbsp;&nbsp;&nbsp;

<div class="tooltips" style="display:none;" title="Please select the ward" id="mumsubwards">
  
  <label for="S">
      <input type="checkbox" id="wardS" value="S" onclick="ViewWards(this)" /><b>Ward S</b></label>
    <div id ="wardSdiv">
      <p style="padding-left: 30px;">
      <label for="iitb">
        <input type="checkbox" id="Sward" value="iitb" onchange="getWard(this)" disabled/>&emsp;IITB</label>
      <label for="ward122">
        <input type="checkbox" id="Sward" value="ward122" onchange="getWard(this)"/>Ward 122</label>
      <label for="zones">
        <input type="checkbox" id="Sward" value="zones" onchange="getWard(this)"/>Zones</label>
      <label for="122_plastic">
        <input type="checkbox" id="Sward" value="buildings" onchange="getWard(this)"/>Building Cluster </label>
          <!-- <label for="building"><p><b>Building</b></p></label> -->

      <label for="122_plastic">
        <input type="checkbox" id="Sward" value="122_plastic" onchange="getWard(this)"/>Building Collecting Plastic</label>

      <label for="bubbles">
          <input type="checkbox" id="Sward" value="bubbles" onchange="getWard(this)"/>Wings</label>
      <!-- <label for="spots">
          <input type="checkbox" id="Sward" value="spots" onchange="getWard(this)" disabled/>Spots</label>
          <label for="wings">
            <input type="checkbox" id="Sward" value="wings" onchange="getWard(this)" disabled/>Wings</label> -->
      <label for="floors">
        <input type="checkbox" id="Sward" value="floors" onchange="getWard(this)" disabled/>Floors</label>
        <label for="flats">
          <input type="checkbox" id="Sward" value="flats" onchange="getWard(this)" disabled/>Flats</label>
        </p>                                
      </div>
    <br>
    <!-- <a href="https://swk.communitygis.net/map/"><u>GS Ward(Worli -Koliwada) Waste Management</u></a>     -->
    
    
<!--  
  <label for="GS">
      <input type="checkbox" id="wardGS" value="GS" onclick="ViewWards(this)" /><b> GS</b></label>
    <div id ="wardGSdiv">
    <p style="padding-left: 30px;">
        <label for="worli-koliwada">
        <input type="checkbox" id="GSward" value="worli-koliwada" onchange="getWard(this)" />Worli-Koliwada</label>
        
    <label for="GSlanes">
      <input type="checkbox" id="GSward" value="GSlanes" onchange="getWard(this)" />Lanes/Bin paths</label>
    
      <label for="GSspots">
      <input type="checkbox" id="GSward" value="GSspots" onchange="getWard(this)" />Spots</label>
      
      <label for="GSbubbles">
      <input type="checkbox" id="GSward" value="GSbubbles" onchange="getWard(this)"/>Bubbles</label>
      
      <label for="GSzones">
      <input type="checkbox" id="GSward" value="GSzones" onchange="getWard(this)"/>Zones</label>
     
      
          
    <label for="GSgrounds">
      <input type="checkbox" id="GSward" value="GSgrounds" onchange="getWard(this)" />Grounds</label>
      
      <label for="GStoilets">
      <input type="checkbox" id="GSward" value="GStoilets" onchange="getWard(this)" />Public Toilets</label>
      
    <label for="GScompost">
      <input type="checkbox" id="GSward" value="GScompost" onchange="getWard(this)" />Compost Pits</label>
      
      <label for="GSopen_places">
      <input type="checkbox" id="GSward" value="GSopen_places" onchange="getWard(this)" />Open Places</label>
    
      <label for="GStemples">
      <input type="checkbox" id="GSward" value="GStemples" onchange="getWard(this)" />Temples</label>
    </p>                            
      </div> -->
                                                                                                                               
      
      <br>
    <label for="L">
      <input type="checkbox" id="wardL" value="L" onclick="ViewWards(this)" /><b> L</b></label>
        <br>
      <div id ="wardLdiv">
        <p style="padding-left: 30px;">
        <label for="L">
          <input type="checkbox" id="Lward" value="Lwardroads" onchange="getWard(this)"/>Roads</label>
          
          <label for="L">
            <input type="checkbox" id="Lward" value="Lzones" onchange="getWard(this)"/>Zones</label>
          
            <label for="L">
            <input type="checkbox" id="Lward" value="Lbuildings" onchange="getWard(this)"/>Raheja Buildings </label>
            </p>
          </div>
 
      <br>
    <a href="https://ee.humanitarianresponse.info/x/xsUkgeZ7"><u>Greenness SWM</u></a>                                                                                                                             
      <br>
      <br>
      <label for="K">
        <input type="checkbox" id="" value="Kwest" onclick="ViewWards(this)" /><b> K WEST</b></label>
        <br>
        
      <div id ="wardkwestdiv">
        <p style="padding-left: 30px;">
        <label for="kwest">
          <input type="checkbox" id="Kwestward" value="ward61" onchange="getWard(this)"/>Corporator Ward 61</label>
          
        <label for="kwest">
          <input type="checkbox" id="Kwestward" value="ward61buildings" onchange="getWard(this)"/>Buildings</label>
          
          <label for="kwest">
            <input type="checkbox" id="Kwestward" value="ward61roads" onchange="getWard(this)"/>Roads</label>
          
          <label for="kwest">
            <input type="checkbox" id="Kwestward" value="ward61edu" onchange="getWard(this)"/>Education Places</label>
          
            <label for="kwest">
            <input type="checkbox" id="Kwestward" value="ward61government" onchange="getWard(this)" disabled/>Government Offices </label>
            
            <label for="kwest">
            <input type="checkbox" id="Kwestward" value="ward61fuel" onchange="getWard(this)"/>Power(Fuel) </label>  
          </p>    
          </div>

      <br>
        <label for="K">
          <input type="checkbox" id="" value="" onchange="" disabled/>Ward K EAST</label>
          <br>
      <label for="H">
      <input type="checkbox" id="" value="" onchange="" disabled/>Ward H EAST</label>
      <br>
      <label for="H">
        <input type="checkbox" id="" value="" onchange="" disabled/>Ward H WEST</label>
      <br>
      <label for="H">
        <input type="checkbox" id="" value="" onchange="" disabled/>Ward M WEST</label>
      <br>
      <label for="H">
        <input type="checkbox" id="" value="" onchange="" disabled/>Ward M EAST</label>
        <br>
        
        <label for="H">
          <input type="checkbox" id="" value="" onchange="" disabled/>Ward P NORTH</label>
        <br>
        <label for="H">
          <input type="checkbox" id="" value="" onchange="" disabled/>Ward P SOUTH</label>
          <br>
          
          <label for="R">
            <input type="checkbox" id="" value="" onchange="" disabled/>Ward R NORTH</label>
          <br>
          <label for="R">
            <input type="checkbox" id="" value="" onchange="" disabled/>Ward R SOUTH</label>
            <br>
          <label for="R">
            <input type="checkbox" id="" value="" onchange="" disabled/>Ward R CENTRAL</label>
          <br>                          
            
          <label for="T">
            <input type="checkbox" id="" value="" onchange="" disabled/>Ward T</label>
            <br>
          <label for="N">
            <input type="checkbox" id="" value="" onchange="" disabled/>Ward N</label>
  </div>

<div class="tooltips">    
  <div class="field_wrapper arrange" id="mumbaiCity" style="display:none;">
      <!-- <hr> -->
      <div>            
          <br> 
          <div class="multiselect">
              <div class="selectBox" onclick="showCheckboxes()">
                <select>
                  <option>Select Wards</option>
                </select>
                <div class="overSelect"></div>
              </div>
              <div class="tooltips" id="checkboxes">
                
                <!-- <label><b><input type="checkbox" id="Mumbai City" value="Mumbai City" onchange="getWard(this)" />Mumbai City</b></label> -->
                <label for="A">
                  <input type="checkbox" id="ward" value="A" onchange="getWard(this)" />Ward A</label>
                <label for="B">
                  <input type="checkbox" id="ward" value="B" onchange="getWard(this)" />Ward B</label>
                <label for="C">
                  <input type="checkbox" id="ward" value="C" onchange="getWard(this)" />Ward C</label>
                <label for="D">
                  <input type="checkbox" id="ward" value="D" onchange="getWard(this)" />Ward D</label>
                <label for="E">
                  <input type="checkbox" id="ward" value="E" onchange="getWard(this)" />Ward E</label>
                <label for="FN">
                  <input type="checkbox" id="ward" value="FN" onchange="getWard(this)" />Ward FN</label>
                <label for="FS">
                  <input type="checkbox" id="ward" value="FS" onchange="getWard(this)" />Ward FS</label>
                <label for="GN">
                  <input type="checkbox" id="ward" value="GN" onchange="getWard(this)" />Ward GN</label>
                <!-- <label for="GS">  -->
                  <!-- <input type="checkbox" id="ward" value="GS" onchange="getWard(this)" />Ward GS</label>  -->
                  
                  <label for="GS"> 
                    <input type="checkbox" id="wardGS" value="GS" onclick="ViewWards(this)" />Ward GS</label>  
                  <div id ="wardGSdiv">
                  <p style="padding-left: 30px;">
                      <label for="worli-koliwada">
                      <input type="checkbox" id="GSward" value="worli-koliwada" onchange="getWard(this)" />Worli-Koliwada</label>
                    
                      <label for="GSzones">
                        <input type="checkbox" id="GSward" value="GSzones" onchange="getWard(this)"/>Zones</label>
                    
                        <label for="GSbubbles">
                          <input type="checkbox" id="GSward" value="GSbubbles" onchange="getWard(this)"/>Bubbles</label>
                  
                          <label for="GSspots">
                            <input type="checkbox" id="GSward" value="GSspots" onchange="getWard(this)" />Spots</label>
                                        
                  <label for="GSlanes">
                    <input type="checkbox" id="GSward" value="GSlanes" onchange="getWard(this)" />Lanes/Bin paths</label>
                   
                    
                        
                  <label for="GSgrounds">
                    <input type="checkbox" id="GSward" value="GSgrounds" onchange="getWard(this)" />Grounds</label>
                    
                    <label for="GStoilets">
                    <input type="checkbox" id="GSward" value="GStoilets" onchange="getWard(this)" />Public Toilets</label>
                    
                  <label for="GScompost">
                    <input type="checkbox" id="GSward" value="GScompost" onchange="getWard(this)" />Compost Pits</label>
                    
                    <label for="GSopen_places">
                    <input type="checkbox" id="GSward" value="GSopen_places" onchange="getWard(this)" />Open Places</label>
                  
                    <label for="GStemples">
                    <input type="checkbox" id="GSward" value="GStemples" onchange="getWard(this)" />Temples</label>
                  </p>         
                  
                  <a href="https://swk.communitygis.net/map/"><u>GS Ward(Worli -Koliwada) Waste Management</u></a>    
    
                    </div>
                
  
  
                </div>
            </div>
            &nbsp;&nbsp;&nbsp;&nbsp;
            
<div class="multiselect">
    <div class="selectBox" onclick="showCheckboxes1()">
      <select>
        <option>Select Layers</option>
      </select>
      <div class="overSelect"></div>
    </div>
    <div class="tooltips" id="checkboxes1">
      
      <label><b>OSM Data</b></label>
      <label for="building">
        <input type="checkbox" id="facility" value="building" onchange="getFacility(this)" />Buildings</label>
      <label for="roads">
        <input type="checkbox" id="facility" value="roads" onchange="getFacility(this)" />Roads</label>
      
      <label><b>DP Polygons</b></label>  
      <label for="education">
        <input type="checkbox" id="facility" value="education" onchange="getFacility(this)" />Education</label>
      <label for="health">
        <input type="checkbox" id="facility" value="health" onchange="getFacility(this)" />Health</label>
      <label for="housing">
        <input type="checkbox" id="facility" value="housing" onchange="getFacility(this)" />Housing</label>
      <label for="municipal_services">
        <input type="checkbox" id="facility" value="municipal_services" onchange="getFacility(this)" />Municipal Services</label>
      <label for="offices">
        <input type="checkbox" id="facility" value="offices" onchange="getFacility(this)" />Offices</label>
        <label for="open_spaces">
        <input type="checkbox" id="facility" value="open_spaces" onchange="getFacility(this)" />Open Spaces</label>
      <label for="primary_activities">
        <input type="checkbox" id="facility" value="primary_activities" onchange="getFacility(this)" />Primary Activities</label>
      <label for="public_utility_and_facilities">
        <input type="checkbox" id="facility" value="public_utility_and_facilities" onchange="getFacility(this)" />Public utility and facilities</label>
      <label for="social_amenities">
        <input type="checkbox" id="facility" value="social_amenities" onchange="getFacility(this)" />Social Amenities</label>
      <label for="transportation">
        <input type="checkbox" id="facility" value="transportation" onchange="getFacility(this)" />Transportation</label>
      <label for="waste_management">
          <input type="checkbox" id="facility" value="waste_management" onchange="getFacility(this)" disabled/>Waste Management</label>
        
      <label for="fire_station">
        <input type="checkbox" id="facility" value="fire_station" onchange="getFacility(this)" disabled/>Fire Station</label>
                                                      
      </div>
  </div>
  </div>
  &nbsp;&nbsp;

  &nbsp;&nbsp;&nbsp;&nbsp;
<div class="tooltips" style="display:none;" title="Please select facility" id="A">

<tr><tb>  <label><input type="checkbox" value="{transport}" onchange="getBoundary(this)"></tb><tb><span> transportation </span></label></tb>
</tr> &nbsp;&nbsp;
<tr>
    <tb> <label><input type="checkbox" value="{edu}" onchange="getBoundary(this)"></tb><tb><span> education </span></label></tb>
</tr>

</div>
  </div>
  </div>
</div>  


<div class="mutliselect border"  >
    <div class="selectBox"  onclick="showCheckboxes2()" >
        <select  class='form-control' >
          <option >Kwest Boundary</option>
        </select>
        <div class="overSelect"></div>
      </div>
    </div>
        <div class="tooltips border" id="checkboxes2" style="display: none;">
          <label>Select Beats</label>
        <div class="checkbox">
            <label for=""><input onchange="putBeat(1)" type="checkbox" id="1" name="" > <span>1</span></label>
        </div>
        <div class="checkbox">
            <label for=""><input onchange="putBeat(2)" type="checkbox" id="2" name="" > <span>2</span></label>
        </div>
        <div class="checkbox">
            <label for=""><input onchange="putBeat(3)" type="checkbox" id="3" name="" > <span>3</span></label>
        </div>
        <div class="checkbox">
            <label for=""><input onchange="putBeat(4)" type="checkbox" id="4" name="" > <span>4</span></label>
        </div>
        <div class="checkbox">
            <label for=""><input onchange="putBeat(5)" type="checkbox" id="5" name="" > <span>5</span></label>
        </div>
        <div class="checkbox">
          <label for=""><input onchange="putBeat(6)" type="checkbox" id="6" name="" > <span>6</span></label>
        </div>
        <div class="checkbox">
          <label for=""><input onchange="putBeat(7)" type="checkbox" id="7" name="" > <span>7</span></label>
        </div>
        <div class="checkbox">
          <label for=""><input onchange="putBeat(8)" type="checkbox" id="8" name="" > <span>8</span></label>
        </div>

        <div class="checkbox">
          <label for=""><input onchange="putBeat(9)" type="checkbox" id="9" name="" > <span>9</span></label>
        </div>
        <div class="checkbox">
          <label for=""><input onchange="putBeat(10)" type="checkbox" id="10" name="" > <span>10</span></label>
        </div>

        <button class="btn btn-outline-dark" onclick="putAWCPoints()">Anganwadi Centers</button>
        </div>

      
</div>
 <div style="text-align: center"> 
    <button style="display: inline-block ;position: relative;top: 100px" id="closebutton" name="closebutton" class="btn btn-secondary"><span class="fa fa-power-off"></span></button> 
</div>
</div>
</div>
<div id="output"></div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="{% static 'js/jquery.multiselect.js'%}"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="{% static 'plugins/L.TileLayer.BetterWMS.js' %}"></script>
    <!-- <script src="{% static 'plugins/L.Geoserver.js' %}"></script> -->

<script>  

// beats
var awcplotted = false;
var idArray = [];
var layerArray = [];
function putBeat(id){
  var opt = id
    var elem = document.getElementById(opt);
    // console.log(wmsLayer)
    if(elem.checked == true){
        // wmsLayer=L.Geoserver.wms("https://geoserver2.communitygis.net/geoserver/wms", {
        //     layers: id,
        // })
        idArray.push(id)
        // wmsLayer=L.Geoserver.wms("https://geoserver2.communitygis.net/geoserver/wms", {

        mymap.setView([19.1110, 72.8112], 13);
        var wmsLayer = L.tileLayer.wms('https://geonode.communitygis.in/geoserver/geonode/wms', {
          // layers: 'geonode:island_city_revised_2_july',
          layers: 'geonode:beatpolygons',
          format: 'image/png',
          transparent: 'true',
          // cql_filter: `id='beatpolygons.${opt}'`,
          cql_filter: `id=${opt}`,
          // cql_filter: `ward_name='${opt}'`,
          // cql_filter: `${facility}>0.0 AND state_gen='${indstate}'`                                        
          // cql_filter: `district_n=${district}`,                                        
        }); 
        // console.log(wms_layer)
       
        wmsLayer.addTo(mymap);
        layerArray.push(wmsLayer)
        if(awcplotted && layerArray.length!=0) {
          awcplotted = true
          putAWCPoints();
          putAWCPoints();
        }
        // console.log(wmsLayer.options.layers.slice(8,))
        // console.log(wmsLayer.options.cql_filter.slice(3,))
        // console.log(`${idArray},${layerArray}`)
    }else if(elem.checked==false){
        var index = idArray.indexOf(id)

        mymap.removeLayer(layerArray[index])
        idArray.splice(index,1)              // delete idArray[index]
        layerArray.splice(index,1)              // delete layerArray[index]
        // console.log(`${index}:${idArray[index]}`)
    }
}

// beat end

$(document).ready(function() {
$('#indstate').on('change', function() {
    //$("#block").show();
    // var state=document.getElementById("indstate");
    // console.log(state);
    if (this.value == 'Mumbai City') {
        putLayer("Mumbai");
        $("#mumbaiCity").show();
        $("#mumsubwards").hide();
        // removewards();

        // $("#block").hide();
    } else if (this.value == 'Mumbai Suburban') {
        putLayer("Mumbai Suburban");
        $("#mumbaiCity").hide();
        $("#mumsubwards").show();
        // $("#block").hide();
    }  
});

$('#view_s').on('change', function() { 
    if (this.value == 'All India View') {
        mymap.setView([20.5937, 78.9629], 4);
        $("#indiaview").show();
        $("#navigatedarea").hide();

        distLayerList.forEach(l => {
            mymap.removeLayer(l);
        })

        pinLayerList.forEach(l => {
            mymap.removeLayer(l);
        })

        if (area) {
            mymap.removeLayer(area);
        }
        clear_layer();
        clearpoint_layer();
        removeWFSfac();
        removeKoboHealthFacity();
        removeKoboHealthFacitywms(facility);
        clear_distlayer();
        clear_pinlayer();

    } else if (this.value == 'Navigated Area View') {
        wmshealthLayerList.forEach(l => {
            mymap.removeLayer(l);
        })


        $("#indiaview").hide();
        $("#navigatedarea").show();
        clear_layer();
        clearpoint_layer();
        removeWFSfac();
        removeKoboHealthFacity();
        removeKoboHealthFacitywms(facility);
        clear_distlayer();
        clear_pinlayer();
    }

});
});
const domain = ['https://geoserver2.communitygis.net/', 'http://localhost/'];
  var rootUrl = domain[0] + 'geoserver/geonode/ows';

  var defaultParameters = {
      service: 'WFS',
      version: '1.0.0',
      request: 'GetFeature',
      outputFormat: 'json'
  };
  var newLayerList=[];
  var wardLayerList = [];
  var wms_legend;
  let activatedHealthFacility={};
  var content,popup_layer;
        
        
        // $('select[multiple]').multiselect();
var expanded = false;

// function removewards() {
//     wardLayerList.forEach(layer => mymap.removeLayer(layer));
// }

function showCheckboxes() {
  var checkboxes = document.getElementById("checkboxes");
  console.log(checkboxes);
  if (!expanded) {
    checkboxes.style.display = "block";
    expanded = true;
  } else {
    checkboxes.style.display = "none";
    expanded = false;
  }
}

function showCheckboxes1() {
  var checkboxes1 = document.getElementById("checkboxes1");
  if (!expanded) {
    checkboxes1.style.display = "block";
    expanded = true;
  } else {
    checkboxes1.style.display = "none";
    expanded = false;
  }
}

//kwest border

let wms_layer;
function showCheckboxes2() {
  var checkboxes1 = document.getElementById("checkboxes2");
  if (!expanded) {
    checkboxes1.style.display = "block";
    expanded = true;

    mymap.setView([19.1110, 72.8112], 13);
    wms_layer = L.tileLayer.wms('https://geonode.communitygis.in/geoserver/geonode/wms', {
          // layers: 'geonode:island_city_revised_2_july',
          layers: 'geonode:KWest_boundary_9June1',
          format: 'image/png',
          transparent: 'true',
          // cql_filter: `distname='${opt}'`,
    })
    wms_layer.addTo(mymap) 

    // console.log("kkkk")
  } else {
    checkboxes1.style.display = "none";
    expanded = false;
    mymap.removeLayer(wms_layer);
  }
}

function ViewWards(obj) {
  // alert(obj.value)
  if ($(obj).is(":checked")) {

  if(obj.value == 'S'){
    var checkboxes1 = document.getElementById("wardSdiv");
    var checkbox = document.getElementById("Sward")
    layer = 'WARD-S:s_ward';
    currentPos = [19.126,72.9296];
  }
    
  if(obj.value == 'GS'){
    var checkboxes1 = document.getElementById("wardGSdiv");
    var checkbox = document.getElementById("GSward")
    layer = 'geonode:mumbai_ward_boundary';
    currentPos = [19.0182,72.8168]
  }
  if(obj.value == 'L'){
    var checkboxes1 = document.getElementById("wardLdiv");
    var checkbox = document.getElementById("Lward")
    layer = 'geonode:L_ward_polygons_16Apr2020'
    currentPos = [19.0959,72.8933];
  }
  if(obj.value == 'Kwest'){
    var checkboxes1 = document.getElementById("wardkwestdiv");
    var checkbox = document.getElementById("Kwestward")
    layer = 'ward61:k_west_mumbai'
    currentPos = [19.1233,72.7784];
  }
  if(checkboxes1.style.display == "block")
    expanded = true;
  else  
    expanded = false;

    // alert(expanded);

  if (!expanded) {
    // alert(checkboxes1.style.display);
    // alert(checkbox.style.display);
    checkboxes1.style.display = "block";
    checkbox.style.display ="block";
    expanded = true;
    // layer = 'WARD-S:s_ward';
    // removeWards1(layer);
    // alert(layer);
    if(layer == "geonode:mumbai_ward_boundary"){
      var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        // layers: 'geonode:island_city_revised_2_july',
        layers: layer,
        format: 'image/png',
        transparent: 'true',
        cql_filter: `Name='G/S'`,
                                             
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);
    console.log(newLayerList);
    // mymap.setView([19.126,72.9296],13)
    mymap.setView(currentPos, 13)
    if (wms_legend) {
        mymap.removeControl(wms_legend);
    }
    console.log(wms_layer);  
    }else{


    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        // layers: 'geonode:island_city_revised_2_july',
        layers: layer,
        format: 'image/png',
        transparent: 'true',
        //cql_filter: `Name='${opt}'`,
                                             
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);
    console.log(newLayerList);
    // mymap.setView([19.126,72.9296],13)
    mymap.setView(currentPos, 13)
    if (wms_legend) {
        mymap.removeControl(wms_legend);
    }
    console.log(wms_layer);
  }
  } else {
    checkboxes1.style.display = "none";
    checkbox.style.display ="none";
    expanded = false;    
  }
  
}
  else{
    //removelayer for viewwards()
    console.log("else in view wards");
    if(obj.value == 'GS')
      removeWards("G/S")
      else if (obj.value == 'S')
      removeLayer("WARD-S:s_ward")
      else if(obj.value == 'L')
      removeLayer("geonode:L_ward_polygons_16Apr2020")
      else if(obj.value == "Kwest")
      removeLayer("ward61:k_west_mumbai")
    
  }
}

function getWard(obj) {
    let ward = obj.value;
    console.log("ward_value",ward);
    // alert("obj is-"+obj.value)
    
    if ($(obj).is(":checked")) {
      // alert("Ward selected is",ward);
        if (ward == "A"){
            // var layer = {layer};
            // console.log(layer);
            putWards("A")                                                                                       
        }
        else if (ward == "B")
          putWards("B")
        else if (ward == "C")
          putWards("C")  
        else if (ward == "D")
          putWards("D")  
        else if (ward == "E")
          putWards("E")  
        else if (ward == "FN")
          putWards("F/N")     //use "FN" for islandcity layer
        else if (ward == "FS")
          putWards("F/S")  
        else if (ward == "GN")
          putWards("G/N")  
        else if (ward == "GS")
          putWards("G/S")   
        else if (ward == "{corporator}")
          putCorpWards("{corporator}")  
        else if (ward == "{admin}")
          putAdminWards("{admin}")
          // ward 122
        else if (ward == "ward122")
          putWards122("ward122")
        else if (ward == "122_plastic")
          putWards122("122_plastic")
        else if (ward == "zones")
          putWards122("zones")
        else if (ward == "buildings")
          putWards122("buildings")
        else if (ward == "bubbles")
          putWards122("bubbles")
        else if (ward == "spots")
          putWards122("spots")
          // ward L
        else if (ward == "Lwardroads")
          putLWard("Lwardroads")
        else if (ward == "Lzones")
          putLWard("Lzones") 
        else if (ward == "Lbuildings")
          putLWard("Lbuildings")
          // ward 61 
        else if (ward == "ward61")
         putWard61("ward61")
        else if (ward == "ward61buildings")
          putWard61("ward61buildings")
        else if(ward =="ward61roads")
          putWard61("ward61roads")
        else if (ward == "ward61edu")
          putWard61("ward61edu")
        else if (ward == "ward61fuel")
          putWard61("ward61fuel")
        else if (ward == "ward61government")
          putWard61("ward61government")
          // ward GS
        else if (ward == "worli-koliwada")
          putGSWard("worli-koliwada")  
        else if (ward == "GSlanes")
          putGSWard("GSlanes")
        else if (ward == "GSspots")
          putGSWard("GSspots")
          else if (ward == "GSbubbles")
          putGSWard("GSbubbles")
          else if (ward == "GSzones")
          putGSWard("GSzones")    
          else if (ward == "GSgrounds")
          putGSWard("GSgrounds")
          else if (ward == "GStoilets")
          putGSWard("GStoilets")
          else if (ward == "GScompost")
          putGSWard("GScompost")
          else if (ward == "GSopen_places")
          putGSWard("GSopen_places")
          else if (ward == "GStemples")
          putGSWard("GStemples")
          
                  
                
    } else {
        if (ward == "A"){
          removeWards("A")
        }  
          else if (ward == "B")
          removeWards("B")
        else if (ward == "C")
          removeWards("C")
        else if (ward == "D")
          removeWards("D")
        else if (ward == "E")
          removeWards("E")
        else if (ward == "FN")
          removeWards("F/N")
        else if (ward == "FS")
          removeWards("F/S")
        else if (ward == "GN")
          removeWards("G/N")
        else if (ward == "GS")
          removeWards("G/S")
        else if (ward == "{corporator}")
          removeLayer("geonode:corporatorwardboundary_mumbai_13may")
        else if (ward == "{admin}")
          removeLayer("geonode:mumbai_ward_boundary")
       //ward 122 - S ward-----------------------------
       else if (ward == "L")
        removeLayer("geonode:L_ward_polygons_16Apr2020") 
       else if (ward == 'ward122')
          removeLayer("WARD-S:ward_122_16sept2021")
        else if (ward == "122_plastic")
          removeLayer("WARD-S:ward_122_building_collecting_plastic")
       else if (ward == "buildings")
          removeLayer("WARD-S:buildings")  
        else if (ward == "zones")
          removeLayer("WARD-S:zones") 
        else if (ward == "bubbles")
          removeLayer("WARD-S:bubbles") 
        else if (ward == "spots")
          removeLayer("WARD-S:spots")
         ///--ward L -------------------- 
        else if (ward == "Lwardroads")
          removeLayer("geonode:osm_lward_roads_03Apr2020")
        else if (ward == "Lzones")
          removeLayer("geonode:l_ward_15may") 
        else if (ward == "Lbuildings")
          removeLayer("geonode:raheja_lward_swm_5nov19") 
        //---ward 61--------------
        
        else if (ward == "ward61"){
          // removeLayer("ward61:corporator61boundary")
          removeLayer("ward61:ward61_boundary_1nov21")
        }
        else if (ward == "ward61buildings")
          removeLayer("ward61:buildings_2nov")
        else if (ward == "ward61roads")
          removeLayer("ward61:ward61osmroad25OCT")
        else if (ward == "ward61edu")
          removeLayer("ward61:education_polygon")
        else if (ward == "ward61fuel")
          removeLayer("ward61:power_polygons")
        else if (ward == "ward61government")
          removeLayer("ward61:ward61government")

        //---ward GS(worli-koliwada)--------------
        else if (ward == "GSlanes")
          removeLayer("worli-koliwada:worli_binpath_28june21")
        else if (ward == "GSspots")
          removeLayer("worli-koliwada:worli_spots_28june21")
        else if (ward == "GSbubbles")
          removeLayer("worli-koliwada:worli_bubbles_28june21")
        else if (ward == "GSzones")
          removeLayer("worli-koliwada:worli_zones_28june21")
        else if (ward == "GSgrounds")
          removeLayer("worli-koliwada:ground_10oct")
        else if (ward == "GStoilets")
          removeLayer("worli-koliwada:public_toilets_20june21")
        else if (ward == "GScompost")
          removeLayer("worli-koliwada:worli_pits28june21")
        else if (ward == "GSopen_places")
          removeLayer("worli-koliwada:worli_openplace_10oct")
        else if (ward == "GStemples")
          removeLayer("worli-koliwada:temples_21june21")
        else if (ward == "worli-koliwada")
          removeLayer("worli-koliwada:worli-koliwada_boundary_7oct21")  
      }
      
}


function getFacility(obj) {
mymap.setView([19.0110, 72.8512], 12);
  let facility = obj.value;
  console.log(facility);
  if ($(obj).is(":checked")) {
    if(facility=="slumhh"){
      putSlums("slumhh")
    }
      if(facility =="building")
        putFacility1("building")
      else if (facility == "roads")
        putFacility2("roads")  
      else if (facility == "education"){
        putFacility("education")                                                                                       
      }
      else if (facility == "health")
        putFacility("health")
      else if (facility == "housing")
        putFacility("housing")  
      else if (facility == "municipal_services")
        putFacility("municipal_services")
      else if (facility == "offices")
        putFacility("offices")
      else if (facility == "open_spaces")
        putFacility("open_spaces")
      else if (facility == "primary_activities")
        putFacility("primary_activities")
      else if (facility == "public_utility_and_facilities")
        putFacility("public_utility_and_facilities")
      else if (facility == "social_amenities")
        putFacility("social_amenities")
      else if (facility == "transportation")
        putFacility("transportation")
      else if (facility == "fire_station")
        putFacility("fire_station")                                    
        
  } else {
      if (facility == "education")
        removeFacility("education")
      
        else if (facility == "health")
        removeFacility("health")
      else if (facility == "housing")
        removeFacility("housing")  
      else if (facility == "municipal_services")
        removeFacility("municipal_services")
      else if (facility == "offices")
        removeFacility("offices")
      else if (facility == "open_spaces")
        removeFacility("open_spaces")
      else if (facility == "primary_activities")
        removeFacility("primary_activities")
      else if (facility == "public_utility_and_facilities")
        removeFacility("public_utility_and_facilities")
      else if (facility == "social_amenities")
        removeFacility("social_amenities")
      else if (facility == "transportation")
        removeFacility("transportation")
      else if (facility == "fire_station")
        removeWards1("fire_station")
      else if (facility == "building")
        removeLayer("geonode:osm_building_islandcity_14june") 
      else if (facility == "roads")
        removeLayer("geonode:osm_road_islandcity_14june")      
    }
}
function putWards(opt) {
    // var district = document.getElementById("district").value;
    console.log("putward",opt);
    
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        // layers: 'geonode:island_city_revised_2_july',
        layers: 'geonode:mumbai_ward_boundary',
        format: 'image/png',
        transparent: 'true',
        cql_filter: `Name='${opt}'`,
        // cql_filter: `ward_name='${opt}'`,
        // cql_filter: `${facility}>0.0 AND state_gen='${indstate}'`                                        
        // cql_filter: `district_n=${district}`,                                        
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);
    mymap.setView([19.0110, 72.8512], 12);
    console.log(newLayerList);
    // if (wms_legend) {
    //     mymap.removeControl(wms_legend);
    // }
    console.log(wms_layer);

    //console.log(wms_legend); 
    // addWMSLegend(layer);
    // TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/geonode/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&cql_filter=" + wms_layer.options.cql_filter;
    // console.log(TRIBLAYER);

}

var TRIBLAYER;

function putLayer(opt) {
    // var district = document.getElementById("district").value;
    console.log("putlayer",opt);
    mymap.setView([19.0110, 72.8512], 12);
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        // layers: 'geonode:island_city_revised_2_july',
        layers: 'geonode:maha_taluka_13march2021',
        format: 'image/png',
        transparent: 'true',
        cql_filter: `distname='${opt}'`,
        
    });
    wms_layer.addTo(mymap);
    wardLayerList.push(wms_layer);
    // console.log(wms_layer);
    if(opt == 'Mumbai')
      mymap.setView([19.0110, 72.8512], 12);
      
    else
      mymap.setView([19.1186, 72.8064], 12);
}


//s ward
function putWards122(opt) {
    // var district = document.getElementById("district").value;
    // console.log("putward122 is : "+opt);
    // mymap.setView([19.1176, 72.9060],11);
    let ward = opt;
    //-----ward 122 (S ward)  ----------------
    if(ward == 'ward122'){
      layer = "WARD-S:ward_122_16sept2021"
      currentPos = [19.119,72.9145]
      zoom_level = 14
    }
    else if(ward == '122_plastic'){  
      layer = "WARD-S:ward_122_building_collecting_plastic"
      currentPos = [19.119,72.9145]
      zoom_level = 14
    }
    else if(ward == 'buildings'){    
      layer = "WARD-S:buildings"  
      currentPos = [19.119,72.9145]
      zoom_level = 14
    }
    else if(ward == 'zones'){    
      layer = "WARD-S:zones"
      currentPos = [19.119,72.9145]
      zoom_level = 14
    }
    else if(ward == 'bubbles'){    
      layer = "WARD-S:bubbles"   
      currentPos = [19.119,72.9145]
      zoom_level = 14
    }

    
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        layers: layer,
        format: 'image/png',
        transparent: 'true',
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);
    // console.log(newLayerList);
    mymap.setView(currentPos,zoom_level)  
    // console.log(wms_layer);
    // addWMSLegend(layer);
       
    if (wms_legend) {
      mymap.removeControl(wms_legend);
    }
    addWMSLegend(layer);
    //TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/geonode/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&QUERY_LAYERS=" + wms_layer.options.layers;
    //console.log(TRIBLAYER);
    mymap.addEventListener('click', Identify);        
}



//gs ward
function putGSWard(opt) {
    // var district = document.getElementById("district").value;
    // console.log("putward122 is : "+opt);
    // mymap.setView([19.1176, 72.9060],11);
    let ward = opt;
   
    //GS Ward
    if (ward == "worli-koliwada"){
      layer = "worli-koliwada:worli-koliwada_boundary_7oct21"
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
    else if(ward == 'GSlanes'){
      layer = "worli-koliwada:worli_binpath_28june21"
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
    else if(ward == 'GSspots'){  
      // alert("spots")
      layer = "worli-koliwada:worli_spots_28june21"
      currentPos = [19.0209,72.8161]
      zoom_level = 17
      
    }
    else if(ward == 'GSbubbles'){    
      layer = "worli-koliwada:worli_bubbles_28june21"  
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
    else if(ward == 'GSzones'){    
      layer = "worli-koliwada:worli_zones_28june21"
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
    else if(ward == 'GSgrounds'){    
      layer = "worli-koliwada:ground_10oct"   
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
    else if(ward == 'GStoilets'){    
      layer = "worli-koliwada:public_toilets_20june21"   
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
    else if(ward == 'GScompost'){    
      layer = "worli-koliwada:worli_pits28june21"   
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
    else if(ward == 'GSopen_places'){    
      layer = "worli-koliwada:worli_openplace_10oct"   
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
    else if(ward == 'GStemples'){    
      layer = "worli-koliwada:temples_21june21"   
      currentPos = [19.0182,72.8168]
      zoom_level = 16
    }
   
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        layers: layer,
        format: 'image/png',
        transparent: 'true',
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);
    // console.log(newLayerList);
    mymap.setView(currentPos,zoom_level)  
    // console.log(wms_layer);
    // -------------------------------TO BE cHECKED - Monika
    // addWMSLegend(layer);
       
    if (wms_legend) {
      // alert(wms_legend)
      mymap.removeControl(wms_legend);
    }
    // ------------------------------------------------------
    addWMSLegend(layer);
    TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/worli-koliwada/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&QUERY_LAYERS=" + wms_layer.options.layers;
    console.log(TRIBLAYER);        
}


//L ward
function putLWard(opt) {
    // var district = document.getElementById("district").value;
    // console.log("putward122 is : "+opt);
    // mymap.setView([19.1176, 72.9060],11);
    let ward = opt;
   
    //L Ward
    if(ward == 'Lwardroads'){    
      layer = "geonode:osm_lward_roads_03Apr2020"
      currentPos = [19.094,72.8737]
      zoom_level = 14
     }
    else if(ward == 'Lzones'){    
      layer = "geonode:l_ward_15may" 
      currentPos = [19.094,72.8737]
      zoom_level = 14 
     }
    else if(ward == 'Lbuildings'){    
      layer = "geonode:raheja_lward_swm_5nov19"
      currentPos = [19.094,72.8737]
      zoom_level = 14 
    }
   
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        layers: layer,
        format: 'image/png',
        transparent: 'true',
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);
    // console.log(newLayerList);
    mymap.setView(currentPos,zoom_level)  
    // console.log(wms_layer);
    // addWMSLegend(layer);
    // alert(wms_legend)
    if (wms_legend) {
      mymap.removeControl(wms_legend);
    }


    addWMSLegend(layer);
    TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/geonode/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&QUERY_LAYERS=" + wms_layer.options.layers;
    console.log(TRIBLAYER);        
}


// ward 61 (K West)
function putWard61(opt) {
    // var district = document.getElementById("district").value;
    // console.log("putward122 is : "+opt);
    // mymap.setView([19.1176, 72.9060],11);
    let ward = opt;
   
    if(ward == 'ward61'){    
      // layer = "ward61:corporator61boundary"
      layer = "ward61:ward61_boundary_1nov21"
      currentPos = [19.1423,72.8137]
      zoom_level = 14 
    }
    else if(ward == 'ward61buildings'){    
      // layer = "ward61:buiding_polygon"
      layer = "ward61:buildings_2nov"
      currentPos = [19.1467,72.8283]
      zoom_level = 16 
    }
    else if(ward == 'ward61roads'){    
      layer = "ward61:ward61osmroad25OCT"
      currentPos = [19.1467,72.8283]
      zoom_level = 16  
    }
    else if(ward == 'ward61edu'){    
      layer = "ward61:education_polygon"
      currentPos = [19.1467,72.8283]
      zoom_level = 16  
    }
    else if(ward == 'ward61fuel'){    
      layer = "ward61:power_polygons"
      currentPos = [19.1467,72.8283]
      zoom_level = 16 
    }
    else if(ward == 'ward61government'){    
      layer = "ward61:government_polygon"
      currentPos = [19.1467,72.8283]
      zoom_level = 16 
    }
   
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        layers: layer,
        format: 'image/png',
        transparent: 'true',
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);
    // console.log(newLayerList);
    mymap.setView(currentPos,zoom_level)  
    // console.log(wms_layer);
    // addWMSLegend(layer);
       
    if (wms_legend) {
      mymap.removeControl(wms_legend);
    }
    addWMSLegend(layer);
    TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/ward61/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&QUERY_LAYERS=" + wms_layer.options.layers;
    console.log(TRIBLAYER);        
}



function putSlums(opt) {
    // var district = document.getElementById("district").value;
    console.log("putlayer",opt);
    mymap.setView([19.0110, 72.8512], 12);
    var wms_layer = L.tileLayer.wms('https://geonode.communitygis.in/geoserver/geonode/wms', {
        // layers: 'geonode:island_city_revised_2_july',
        layers: 'geonode:kwest_slum_HH_10june',
        format: 'image/png',
        transparent: 'true',
        // cql_filter: `distname='${opt}'`,
        
    });
    wms_layer.addTo(mymap);
    wardLayerList.push(wms_layer);
    console.log(wms_layer);
    if(opt == 'Mumbai')
      mymap.setView([19.0110, 72.8512], 12);
      
    else
      mymap.setView([19.1186, 72.8064], 12);
}


// awc



var points=[];
var popup_layer=[];
var wms_layer1;
function putAWCPoints(opt){
    

    if(!awcplotted){
      if(layerArray.length === 0){

        mymap.setView([19.1110, 72.8112], 13);

          fetch('https://geonode.communitygis.in/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Aawc1&outputFormat=application%2Fjson')
          .then(result=>result.json())
          .then((output)=>{
            wms_layer1 = L.geoJson(output,{
              onEachFeature: function(feature, layer){
                layer.bindPopup(`<div >Beat No: ${feature.properties.beat_no}<br>Population: ${feature.properties.population}<br>Males: ${feature.properties.males}<br>Females: ${feature.properties.females}  </div>`)
              },
            })
            wms_layer1.addTo(mymap)
            points.push(wms_layer1);
          })



      }else{
        var t = layerArray.map(x => x.options.cql_filter.slice(3,))
        console.log(t)
      
          mymap.setView([19.1110, 72.8112], 13);
          fetch('https://geonode.communitygis.in/geoserver/geonode/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=geonode%3Aawc1&outputFormat=application%2Fjson')
          .then(result=>result.json())
          .then((output)=>{
            wms_layer1 = L.geoJson(output,{
              onEachFeature: function(feature, layer){
                layer.bindPopup(`<div >Beat No: ${feature.properties.beat_no}<br>Population: ${feature.properties.population}<br>Males: ${feature.properties.males}<br>Females: ${feature.properties.females}  </div>`)
              },
              filter: function(feature, layer){
                for(i of t){
                  if(feature.properties.beat_no == i){
                    return feature.properties.beat_no;
                  }
                }
              }
              
            })
            wms_layer1.addTo(mymap)
            points.push(wms_layer1);
          })

          
      }
        
      awcplotted = true;
    }else{
    awcplotted = false;
     points.forEach(element => {
        mymap.removeLayer(element)
      });
    }
}

//to remove unchecked layer
function removeWards1(opt) {
  // alert("In remove Wards"+opt);
console.log(newLayerList);
newLayerList.forEach(layer => mymap.removeLayer(layer));
}

function removeWards(opt) {
  //  alert("In remove Wards"+opt);
  console.log("removeward=",opt);
  // var a = "ward_name="+"'"+opt+"'";
  var a = "Name="+"'"+opt+"'";
  console.log(a);
  
  newLayerList.forEach((layer, index) => {
    if (layer.options.cql_filter === a) {
        mymap.removeLayer(layer);
        newLayerList.splice(index, 1);
        if (wms_legend) {
        // alert(wms_legend)
          mymap.removeControl(wms_legend);
        }
    }
    // mymap.removeLayer(layer);
  });

}

// var wards = ["A","B","C","D"];
//this function is for facilities
function putFacility(opt) {
  var ward = document.getElementById('ward').value;
  var checks = $('input[type="checkbox"]:checked').map(function() {

    return $(this).val();
  }).get()
  console.log(checks);
  var newchecks = $('input[type="checkbox"]:checked').val();
  $('input[type=checkbox]:checked').each(function () {
  var status = (this.checked ? $(this).val() : "");
  var id = $(this).attr("value");
  $('#output').append("<h3>" + id  + "</h3>");
  // console.log(document.getElementById('output'));
  // console.log(id);
  //  return id;         
  });
  // console.log(document.getElementById('output').textContent);
  var checkedWard = document.getElementById('output').innerText;
  var text = $('#output').text();
  // console.log(text);
  $('#output').each(function () {
  var text1 = document.getElementById('output').innerText;
  var ward = ["A","B","C","D","E","FS","FN","GN","GS"];
  // console.log(text1.length);

  for(var i=0; i<ward.length; i++) {
    if(text1.includes(ward[i])) {
      console.log(ward[i]);
      var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
                          layers: 'geonode:island_city_revised_2_july',
                          format: 'image/png',
                          
                          transparent: 'true',
                          cql_filter: `layer_name='${opt}' AND ward_name='${ward[i]}'`,
                          // cql_filter: `layer_name='${opt}'`,                                        
                          // cql_filter: `district_n=${district}`,                                        
                      });
                      wms_layer.addTo(mymap);
                      newLayerList.push(wms_layer);

                      // if (wms_legend) {
                      //     mymap.removeControl(wms_legend);
                      // }
                //       if (wms_legend) {
                //     mymap.removeControl(wms_legend);
                // }
                // addWMSLegend(wms_layer);
                      console.log(wms_layer);
    }  
  }

});
  var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
          layers: 'geonode:island_city_revised_2_july',
          format: 'image/png',
          
          transparent: 'true',
          cql_filter: `layer_name='${opt}' AND ward_name='${newchecks}'`,
          // cql_filter: `layer_name='${opt}'`,                                        
          // cql_filter: `district_n=${district}`,                                        
      });
      wms_layer.addTo(mymap);
      newLayerList.push(wms_layer);
      console.log(wms_layer);
     
  }
  //buildings
function putFacility1(opt) {
    // var ward = document.getElementById("ward").value;
    // var district = document.getElementById("district").value;
    console.log(opt);
    console.log(ward);
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        layers: 'geonode:osm_building_islandcity_14june',
        format: 'image/png',
        
        transparent: 'true',
        // cql_filter: `layer_name='${opt}' AND ward_name='${ward}'`,
        // cql_filter: `layer_name='${opt}'`,                                        
        // cql_filter: `district_n=${district}`,                                        
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);

    // if (wms_legend) {
    //     mymap.removeControl(wms_legend);
    // }
    console.log(wms_layer);
    //console.log(wms_legend); 
    // addWMSLegend(layer);
    // TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/geonode/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&QUERY_LAYERS=" + wms_layer.options.layers;
    // // console.log(TRIBLAYER);

}

//roads
function putFacility2(opt) {
    // var ward = document.getElementById("ward").value;
    // var district = document.getElementById("district").value;
    console.log(opt);
    console.log(ward);
    layer = "geonode:osm_road_islandcity_14june"
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        layers: 'geonode:osm_road_islandcity_14june',
        format: 'image/png',
        
        transparent: 'true',
        // cql_filter: `layer_name='${opt}' AND ward_name='${ward}'`,
        // cql_filter: `layer_name='${opt}'`,                                        
        // cql_filter: `district_n=${district}`,                                        
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);

    // if (wms_legend) {
    //     mymap.removeControl(wms_legend);
    // }
    console.log(wms_layer);
    //console.log(wms_legend); 
    // addWMSLegend(layer);
    addWMSLegend(layer);
    TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/geonode/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&QUERY_LAYERS=" + wms_layer.options.layers;
    // // console.log(TRIBLAYER);

}

//for mumbai corporator ward boundaries
function putCorpWards(opt) {
    // var ward = document.getElementById("ward").value;
    // var district = document.getElementById("district").value;
    console.log(opt);
    console.log(ward);
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        layers: 'geonode:corporatorwardboundary_mumbai_13may',
        format: 'image/png',
        
        transparent: 'true',
        // cql_filter: "district= Mumbai City",
        // cql_filter: `layer_name='${opt}' AND ward_name='${ward}'`,
        // cql_filter: `layer_name='${opt}'`,                                        
        // cql_filter: `district_n=${district}`,                                        
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);

    // if (wms_legend) {
    //     mymap.removeControl(wms_legend);
    // }
    console.log(wms_layer);
    //console.log(wms_legend); 
    // addWMSLegend(layer);
    // TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/geonode/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&QUERY_LAYERS=" + wms_layer.options.layers;
    // // console.log(TRIBLAYER);

}



//for mumbai admin ward boundaries
function putAdminWards(opt) {
    // var ward = document.getElementById("ward").value;
    // var district = document.getElementById("district").value;
    console.log(opt);
    console.log(ward);
    var wms_layer = L.tileLayer.wms('https://geoserver2.communitygis.net/geoserver/wms', {
        layers: 'geonode:mumbai_ward_boundary',
        format: 'image/png',
        
        transparent: 'true',
        // cql_filter: "district='" + opt + "'",
        // cql_filter: `layer_name='${opt}' AND ward_name='${ward}'`,
        // cql_filter: `layer_name='${opt}'`,                                        
        // cql_filter: `district_n=${district}`,                                        
    });
    wms_layer.addTo(mymap);
    newLayerList.push(wms_layer);

    // if (wms_legend) {
    //     mymap.removeControl(wms_legend);
    // }
    console.log(wms_layer);
    //console.log(wms_legend); 
    // addWMSLegend(layer);
    // TRIBLAYER = "https://geoserver2.communitygis.net/geoserver/geonode/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=" + wms_layer.options.layers + "&QUERY_LAYERS=" + wms_layer.options.layers;
    // // console.log(TRIBLAYER);

}




function addWMSLegend(layer) {
    lagendGraphic = "https://geoserver2.communitygis.net/geoserver/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&WIDTH=20&HEIGHT=20&LAYER=" + layer + "&LEGEND_OPTIONS=forceLabels:on";
    wms_legend = L.wmsLegend(lagendGraphic);
}

function removeFacility(layer_name) {
    // if (wms_legend) {
    //     mymap.removeControl(wms_legend);
    // }
  
    $('#output').each(function () {
      var text1 = document.getElementById('output').innerText;

      var ward = ["A","B","C","D","E","FN","FS","GN","GS"];
    console.log(layer_name);
    for (var i=0; i<ward.length; i++) {
      if (text1.includes(ward[i])){
    var a = "layer_name="+"'"+layer_name+"'"+" AND "+"ward_name="+"'"+ward[i]+"'";
    console.log(a);
    newLayerList.forEach((layer, index) => {
        if (layer.options.cql_filter === a) {
            mymap.removeLayer(layer);
            if (wms_legend) {
        // alert(wms_legend)
              mymap.removeControl(wms_legend);
            }
            // newLayerList.splice(index, 1);
        }
    });
  }
  else {
    var a = "layer_name="+"'"+layer_name+"'";
    console.log(a);
    newLayerList.forEach((layer, index) => {
        if (layer.options.cql_filter === a) {
            mymap.removeLayer(layer);
            if (wms_legend) {
        // alert(wms_legend)
              mymap.removeControl(wms_legend);
            }
            // newLayerList.splice(index, 1);
        }
    });
  }
}
});
}

function removeLayer(unchecked_layer) {
  
//   for(var i = 0; i < newLayerList.length ; i++){
//     console.log("ARRAY LIST" + newLayerList[i.value])
// }
  // alert(unchecked_layer)
  newLayerList.forEach((layer, index) => {
    console.log("newlayerlist :"+ layer.options.layers+":"+index)
  if (layer.options.layers === unchecked_layer) {
      mymap.removeLayer(layer);
      
      newLayerList.splice(index, 1);
      if (wms_legend) {
        // alert(wms_legend)
        mymap.removeControl(wms_legend);
      }
      // mymap.removeControl(wmsLegend);
  } 
  // if (wms_legend) {
  //   alert(wms_legend)
  //   mymap.removeControl(wms_legend);
  // }
  
  });
}

function remove(opt){
  console.log(opt);
  console.log(newLayerList[opt]);
  mymap.removeLayer(newLayerList[opt]);
  // remove(opt);
  if (wms_legend) {
        // alert(wms_legend)
        mymap.removeControl(wms_legend);
      }
}


mymap.addEventListener('click', Identify);

function Identify(e) {

console.log("Identify",e);
// set parameters needed for GetFeatureInfo WMS request
var sw = mymap.options.crs.project(mymap.getBounds().getSouthWest());
var ne = mymap.options.crs.project(mymap.getBounds().getNorthEast());
var BBOX = sw.x + "," + sw.y + "," + ne.x + "," + ne.y;
var WIDTH = mymap.getSize().x;
var HEIGHT = mymap.getSize().y;

var X = Math.trunc(mymap.layerPointToContainerPoint(e.layerPoint).x);
var Y = Math.trunc(mymap.layerPointToContainerPoint(e.layerPoint).y);

// compose the URL for the request


var URL = TRIBLAYER + '&BBOX=' + BBOX + '&FEATURE_COUNT=1&HEIGHT=' + HEIGHT + '&WIDTH=' + WIDTH + '&INFO_FORMAT=application%2Fjson&TILED=false&CRS=EPSG%3A3857&I=' + X + '&J=' + Y;
// console.log(URL);
//send GetFeatureInfo as asynchronous HTTP request using jQuery $.ajax
$.ajax({
    url: URL,
    dataType: "json",
    type: "GET",
    success: function(data) {
        if (data.features.length !== 0) { // at least one feature returned in response
            var feature = data.features[0]; // first feature from response
            console.log(feature);
            // Set up popup for clicked feature and open it
            var popup = new L.Popup({
                maxWidth: 300
            });
            if (feature.properties.zono_numbe) {
                console.log("I reached at");
                
                if(feature.properties.zono_numbe == 1){
                    lanes = "Akbar saikh chowl,"+"Muktabai chowl,"+"Laxman patel chowl,"+"Sulochna bane chowl,"+"John golbo chowl,"+"Atmaram sonar chowl,"+"	Dilima house,"+"Kutina house,"+"Rita john house,"+"Anthony kini house,"+"Mahendra niwas,"+"Rojibai agosti chowl,"+"Micle josef chowl,"+"Savitribai chowl,"+"Tigdi chowl,"+"Narayan niwas chowl,"+"Nitore chowl,"+"Vitthal worlikar chowl,"+"Naryan krupa chowl,"+"Guru krupa chowl,"+"Parvati bai niwas";

                }
                if(feature.properties.zono_numbe == 2){
                    lanes = "Jayhind Krida Mandal,"+"Naveet Galli,"+"Buddist chaal,"+"Ganesa krida mandal,"+"Sanjay krida mandal,"+"Sarasvati band pataka,"+"Lakshmi narayan sadan,"+"Kalikhan chaal,"+"Hamuman galli,"+"Buddey house,"+"Tare Galli";

                }
                if(feature.properties.zono_numbe == 3){
                    lanes = "Our Lady Of Velenkanni Cross,"+"Bhandarwada Ground,"+"Siddhivinayak Grhanirmana Sanstha ,"+"Waras Lane,"+"Love Star Krida Mandal,"+"Love Star Krida Mandal 2,"+"Amar Prem Chowk,"+"Amar Prem Krida mandal,"+"Ram singh chowl,"+"Mohan jayram chowl	Bhagirathi,"+"Daru pawar chowl,"+"Munsipal chaowl,"+"Gokhran chowl,"+"Ganpat shivra chowl,"+"ramdhani gupta niwas chowl,"+"Atmaram kharote chowl,"+"Bhagirathi niwas,"+"Chikane house";
                }
                if(feature.properties.zono_numbe == 4){
                    lanes = "Milinda mitra mandal,"+"Datta kupa mandal,"+"Datta kupa mandal 2,"+"Baji Bala mitra mandal,"+"Sangama krida mandal,"+"Sambhaji mitra mandal,"+"Lucky matton shop";

                }
                if(feature.properties.zono_numbe == 5){
                    lanes = "Jamat Hall	Datta Kridamandal,"+"Baji Balmandal	Amol classes,"+"Pakhari Galli,"+"Bajar Galli,"+"Vijay Mitra Mandal,"+"Chotu Bai Ganapat House,"+"Fish Market,"+"Aaradhna,"+"Yashwant Asharm,"+"Teen Batti Naka,"+"Bal Mitra Seva Mandal";

                }
                if(feature.properties.zono_numbe == 6){
                    lanes = "Bhagat Galli,"+"Tare Galli,"+"Balchandra Nivas	Vrundavan,"+"Gonta Galli,"+"Jagruti Mandal,"+"Swarajya Mandal,"+"Manik Nakva House,"+"Pimpal Galli,"+"Lakshimi Jaganath Shruti Nivas,"+"Randhir Seva Mandal,"+"Mata Hirkani Nivas,"+"Jay Malhar House,"+"Aanad Classes,"+"Aaradhna Shankar Mandir";

                }
                if(feature.properties.zono_numbe == 7){
                    lanes = "Dukkur Galli,"+"Dukkur Galli 2,"+"Tare House,"+"Isana John Koli,"+"Amar Meghnath Mandal,"+"Sadguru Bhavan,"+"Dyaneshwar Mandal,"+"Ekvira Nivas (Shriram Galli)	Shriram Galli,"+"Shriram Galli 2,"+"Shri Lakshimi Nivas,"+"Amar Sports Clube,"+"120 Kridamandal,"+"K House (Sonapur Lane),"+"Sonapur Lane,"+"Dyaneshwar Kridamandal Mandal,"+"Shriram Galli 3,"+"Matru Smruti Nivas,"+"Sonapur Lane 2,"+"Ekvira Nivas (Sonpur Lane),"+"Sai baba mandir";

                }
                if(feature.properties.zono_numbe == 8){
                    lanes = "Walmiki Chowk,"+"Ganesha Temple,"+"Walmiki Chowk 2,"+"Pandharinath Niwas,"+"Janaki sadhan,"+"Balvir Galli,"+"Parvatibai,"+"Parashuram Niwas,"+"Balvir Galli 2,"+"Balvir Galli 3,"+"Walmiki Chowk 3,"+"Shankar Patil Niwas";

                }
                if(feature.properties.zono_numbe == 9){
                    lanes = "Taak galli,"+"Dinesh store,"+"Taak galli 1,"+"Shree krishna mandir,"+"taak galli,"+"Taak galli 2,"+"Sri sai madir ,"+"Sai baba madir,"+"Siddhivinayak krida mandal,"+"Sri ram galli,"+"Astik brass band Pathak	Amar meghnath mandal,"+"Nautan bala mitra mandal";

                }
                if(feature.properties.zono_numbe == 10){
                    lanes = "Kranti Kridamandal,"+"Lkshimi Sahwas,"+"Ashish Bhavan ,"+"Vikas Mitra Mandam,"+"Vijay Jayant Koli Nivas,"+"Vikas Galli,"+"Mahapooja Mandal,"+"Vikas Galli,"+"Dinesh Store,"+"Taak Galli,"+"Shree Ganesh Seva Mandal,"+"Navjivan Kridamandal,"+"Navjivan Wasahat,"+"Navjivan Wasahat 2,"+"Killa (Worli Koliwada),"+"K House (Killa),"+"	Sai Baba Mandir (Navjivan)";

                }
                if(feature.properties.zono_numbe == 11){
                    lanes = "Sri Sai Prasad Sadan,"+"Nikam House,"+"Frank Mery Villa,"+"Worli Village Nagari vikasa Sanstha,"+"Damodara Seva Mandal,"+"Damodara Ground,"+"Dattatraya save Mandal,"+"Datta mandir ";

                }
                if(feature.properties.zono_numbe == 12){
                    lanes = "Golfadevi Navratrotsava Mandal,"+"Golfadevi Navratrotsava Mandal 2	,"+"Dhananjaya krida mandal,"+"Jana seva mandal,"+"Sai baba mandir Ghumata mandal,"+"Golfadevi mandir,"+"Golfadevi Krida mandal";

                }
                if(feature.properties.zono_numbe == 13){
                    lanes = "Ganpti Mandir,"+"Amol classes,"+"Prakash Arun Band Pathk,"+"Shilpa Hair Saloon Galli,"+"Dr Yadav Galli,"+"Mary Nivas,"+"Shree Sai Krupa Market,"+"Hanuman Nivas,"+"SAP Enterpriser ,"+"Sangam Kridamandal,"+"Sangam Kridamandal 2	,"+"Sangam Kridamandal 3";

                }
                
                content = "<table class = 'popupclass' ><tr colspan='5'><b>Zone Information</b></tr>" +
                    "<tr><td><b>Name</b></td><td>" + feature.properties.zone_name + "</td></tr>" +
                    "<tr><td><b>Number </b></td><td>" + feature.properties.zono_numbe+ "</td></tr>" + 
                    "<tr><td><b>Lanes</b></td><td>" + lanes+ "</td></tr>" +"</table>";
            }
            if (feature.properties.layer) {
                console.log("I reached at");
                content = "<table class = 'popupclass' ><tr><td><b>BinPath Information</b></td><td></td></tr>" +
                    "<tr><td><b>Zone Name</b></td><td>" + feature.properties.zone_name + "</td></tr>" +
                    "<tr><td><b>Zone Id</b></td><td>" + feature.properties.zone_id+ "</td></tr>" + "</table>";
            } 
            if (feature.properties.bubble_nm) {
                console.log("I reached at");
                content = "<table class = 'popupclass' ><tr><td><b>Bubble Information</b></td><td></td></tr>" +
                    "<tr><td><b>Bubble Id: </b></td><td>" + feature.properties.bubble_id + "</td></tr>" +
                    "<tr><td><b>Bubble Name: </b></td><td>" + feature.properties.bubble_nm + "</td></tr>" +
                    "<tr><td><b>Zone Name: </b></td><td>" + feature.properties.zone_name + "</td></tr>" +
                    "<tr><td><b>Zone Number: </b></td><td>" + feature.properties.zone_id+ "</td></tr>" + "</table>";
            } 
            if (feature.properties.spot_id) {
                // console.log("I reached at");
            
                str1 = feature.properties.zone_id
                items = str1.split('_')
                spot_num = items[items.length - 1]
                fn = feature.properties.spot_name.trim()
                // console.log(items[items.length - 1]);
                // console.log(items);
                // console.log
                // filename = spot_num + '.' + feature.properties.spot_id +fn+'.jpg';
                filename = spot_num + '.' + feature.properties.spot_id +fn;
                console.log(filename)

                content = "<table border = 2 class = 'popupclass' ><tr colspan='4'><b>Spot Information</b></tr>"+
                    "<tr><td colSpan='5'><b>Spot Number: </b></td><td>" + feature.properties.spot_id + "</td></tr>" +
                    "<tr><td colSpan='5'><b>Spot Name: </b></td><td>" + feature.properties.spot_name + "</td></tr>" +
                    "<tr><td colSpan='5'><b>Zone ID: </b></td><td>" + feature.properties.zone_id + "</td></tr>" +
                    "<tr><td colSpan='5'><b>Zone Name: </b></td><td>" + feature.properties.zone_name+ "</td></tr>" +
                    "<tr><td colSpan='5 '><b>Image: </b></td><td><img class = 'popupimage' src='https://swk.communitygis.net/static/images/SPOT21.4.2021/".concat(filename)+"' alt='image not found - '>"+filename+"</a></td></tr>" + "</table>";
            } 
            
            if (feature.properties.Temple_nam) {
                // console.log("For Grounds(lanmark menu)
                str1 = feature.properties.Temple_nam
                items = str1.split('.')
                Temple_nam = items[items.length - 2]
                fn = feature.properties.Temple_nam.trim()
                console.log(items[items.length - 2 ]);
                console.log(items);
                // console.log
                filename = Temple_nam+'.jpg';
                console.log(filename)
              
                content = "<table border = 2 class = 'popupclass' ><tr colSpan='5'><b>Worship Place Information</b></tr>"+
                    
                    "<tr><td colSpan='5'><b>Name:</b></td><td>" +Temple_nam+ "</td></tr>" +
                    "<tr><td colSpan='5 '><b>Image: </b></td><td><img class = 'popupimage' src='https://swk.communitygis.net/static/images/Temple/".concat(filename)+"' alt='image not found - '>"+filename+"</a></td></tr>" + "</table>";
            } 
            if (feature.properties.ground) {
                // console.log("For Grounds(lanmark menu)
                str1 = feature.properties.ground
                items = str1.split('.')
                ground_name = items[items.length - 2]
                fn = feature.properties.ground.trim()
                console.log(items[items.length - 2 ]);
                console.log(items);
                // console.log
                filename = ground_name+'.jpg';
                console.log(filename)
              
                content = "<table border = 2 class = 'popupclass' ><tr colSpan='5'><b>Ground Information</b></tr>"+
                    
                    "<tr><td colSpan='5'><b>Name:</b></td><td>" +ground_name+ "</td></tr>" +
                    "<tr><td colSpan='5 '><b>Image: </b></td><td><img class = 'popupimage' src='https://swk.communitygis.net/static/images/Ground/".concat(filename)+"' alt='image not found - '>"+filename+"</a></td></tr>" + "</table>";
            }
            if (feature.properties.Toilet_Nam) {
                console.log("For Toilets(lanmark menu)")
                str1 = feature.properties.Toilet_Nam
                items = str1.split('.')
                Toilet_Nam = items[items.length - 2]
                fn = feature.properties.Toilet_Nam.trim()
                console.log(items[items.length - 2 ]);
                console.log(items);
                // console.log
                filename = Toilet_Nam+'.jpg';
                console.log(filename)
              
                content = "<table border = 2 class = 'popupclass' ><tr colSpan='5'><b>Toilet Information</b></tr>"+
                    
                    "<tr><td colSpan='5'><b>Name:</b></td><td>" +Toilet_Nam+ "</td></tr>" +

                    "<tr><td colSpan='5 '><b>Image: </b></td><td><img class = 'popupimage' src='https://swk.communitygis.net/static/images/Toilets/".concat(filename)+"' alt='image not found - '>"+filename+"</a></td></tr>" + "</table>";

                    "<tr><td colSpan='5 '><b>Image: </b></td><td><img class = 'popupimage' src='https://swk.communitygis.net/static/images/Public Toilets/".concat(filename)+"' alt='image not found - '>"+filename+"</a></td></tr>" + "</table>";

            } 
            if (feature.properties.opnplace) {
                
                str1 = feature.properties.opnplace
                items = str1.split('.')
                OpenPlace = items[items.length - 2]
                fn = feature.properties.opnplace.trim()
                console.log(items[items.length - 2 ]);
                console.log(items);
                // console.log
                filename = OpenPlace+'.jpg';
                console.log(filename)
              
                content = "<table border = 2 class = 'popupclass' ><tr colSpan='5'><b>Workship Places Information</b></tr>"+
                    
                    "<tr><td colSpan='5'><b>Name:</b></td><td>" +OpenPlace+ "</td></tr>" +
                    "<tr><td colSpan='5 '><b>Image: </b></td><td><img class = 'popupimage' src='https://swk.communitygis.net/static/images/Open Spaces/".concat(filename)+"' alt='image not found - '>"+filename+"</a></td></tr>" + "</table>";
            } 
            if (feature.properties.Pits_Name) {
                console.log("For Pits_Name(lanmark menu)")
                str1 = feature.properties.Pits_Name
                items = str1.split('.')
                Pits_Name = items[items.length - 2]
                fn = feature.properties.Pits_Name.trim()
                console.log(items[items.length - 2 ]);
                console.log(items);
                // console.log
                filename = Pits_Name+'.jpg';
                console.log(filename)
              
                content = "<table border = 2 class = 'popupclass' ><tr colSpan='5'><b>Pit Information</b></tr>"+
                    
                    "<tr><td colSpan='5'><b>Name:</b></td><td>" +Pits_Name+ "</td></tr>" +
                    "<tr><td colSpan='5 '><b>Image: </b></td><td><img class = 'popupimage' src='https://swk.communitygis.net/static/images/Pits/kandevadi composting.jpg' alt='image not found - '>"+filename+"</a></td></tr>" + "</table>";
            }

            popup.setContent(content);
                popup.setLatLng(e.latlng);
                mymap.openPopup(popup);
            }
        }
    });
}


</script>

{% endblock %}              
